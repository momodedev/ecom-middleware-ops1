[defaults]
host_key_checking = False
inventory = myhosts
interpreter_python = /usr/bin/python3
remote_user = azureuser
roles_path = roles:~/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles
timeout = 600
command_timeout = 600
connect_timeout = 60
connect_retry_timeout = 300
# Increase forks for parallel execution but not too high to avoid throttling
forks = 3
# Add retries for SSH connections
retry_files_enabled = False
# Pipelining for better performance over private network
pipelining = True

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o ServerAliveInterval=30 -o ServerAliveCountMax=10 -o ConnectTimeout=60
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
# Retry SSH connections
retries = 5